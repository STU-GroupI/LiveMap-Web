<div class="space-y-4 sm:space-y-6">
    <div class="space-y-6">
        <div>
            <div class="group p-4 bg-white border border-gray-200 shadow-2xs rounded-xl focus:outline-hidden focus:shadow-md transition dark:bg-neutral-900 dark:border-neutral-800">
                <div class="grid sm:grid-cols-2 lg:grid-cols-3 items-center gap-2">
                    <!-- Step 1 -->
                    <div class="group flex flex-col justify-center hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 rounded-xl p-4 md:p-5 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
                        <div class="flex justify-center items-center size-12 bg-blue-600 rounded-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-up-icon lucide-image-up shrink-0 size-6 text-white">
                                <path d="M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"/><path d="m14 19.5 3-3 3 3"/><path d="M17 22v-5.5"/><circle cx="9" cy="9" r="2"/>
                            </svg>
                        </div>
                        <div class="mt-5">
                            <h3 class="group-hover:text-gray-600 text-lg font-semibold text-gray-800 dark:text-white dark:group-hover:text-gray-400">1. Upload an Image</h3>
                            <p class="mt-1 text-gray-600 dark:text-neutral-400">Choose the image you want to align with the geographic map by uploading it. This will serve as the base for mapping.</p>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="group flex flex-col justify-center hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 rounded-xl p-4 md:p-5 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
                        <div class="flex justify-center items-center size-12 bg-blue-600 rounded-xl">
                            <svg class="shrink-0 size-6 text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/>
                            </svg>
                        </div>
                        <div class="mt-5">
                            <h3 class="group-hover:text-gray-600 text-lg font-semibold text-gray-800 dark:text-white dark:group-hover:text-gray-400">2. Select Markers</h3>
                            <p class="mt-1 text-gray-600 dark:text-neutral-400">Pick at least 6 corresponding points on both the image and the map. Spread the points out for better accuracy. Adding more points improves the precision of the alignment.</p>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="group flex flex-col justify-center hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 rounded-xl p-4 md:p-5 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800">
                        <div class="flex justify-center items-center size-12 bg-blue-600 rounded-xl">
                            <svg class="shrink-0 size-6 text-white" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                        <div class="mt-5">
                            <h3 class="group-hover:text-gray-600 text-lg font-semibold text-gray-800 dark:text-white dark:group-hover:text-gray-400">3. Generate the Overlay</h3>
                            <p class="mt-1 text-gray-600 dark:text-neutral-400">Click the "Generate" button in the toolbar to align the selected points and overlay the image onto the geographic map.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 1 -->
        <div id="step-1" class="group flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl hover:shadow-md focus:outline-hidden focus:shadow-md transition dark:bg-neutral-900 dark:border-neutral-800">
            <div class="p-4 md:p-5">
                <div class="flex items-center justify-center w-full">
                    <label for="imageUpload" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600">
                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                            <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                            </svg>
                            <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">SVG, PNG, JPG or GIF (MAX. 800x400px)</p>
                        </div>
                        <input id="imageUpload" type="file" class="hidden" />
                    </label>
                </div>
            </div>
        </div>

        <div id="step-2" class="space-y-6 opacity-20 pointer-events-none">
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <div id="image-markers" class="p-4 bg-white border border-gray-200 shadow-2xs rounded-t-lg hover:shadow-md focus:outline-hidden focus:shadow-md transition dark:bg-neutral-900 dark:border-neutral-800">
                        <ul id="image-marker-list" class="list-disc flex gap-2"></ul>
                    </div>
                    <div id="image-container" class="w-full h-96 lg:h-[500px] bg-gray-200 rounded-b-lg shadow-sm border-b border-l border-r border-gray-200">
                        <canvas id="image-canvas" width="100%" height="100%"></canvas>
                    </div>
                </div>
                <div>
                    <div id="map-markers" class="p-4 bg-white border border-gray-200 shadow-2xs rounded-t-lg hover:shadow-md focus:outline-hidden focus:shadow-md transition dark:bg-neutral-900 dark:border-neutral-800">
                        <ul id="map-marker-list" class="list-disc flex gap-2"></ul>
                    </div>
                    <div id="warping-map" class="w-full h-96 lg:h-[500px] bg-gray-200 rounded-b-lg shadow-sm border-b border-l border-r border-gray-200"></div>
                </div>
            </div>
        </div>

        <div id="bottom-toolkit" tabindex="-1"
             class="opacity-20 pointer-events-none group w-full px-6 py-4 mt-4 bg-white border border-gray-200 rounded-xl transition dark:bg-neutral-900 dark:border-neutral-800">

            <div id="controls" class="flex flex-col sm:flex-row sm:items-center gap-6">
                <button id="generate"
                        class="w-full sm:w-auto inline-flex items-center justify-center gap-x-2 px-5 py-2.5 text-sm font-semibold text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles-icon lucide-sparkles shrink size-4"><path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/><path d="M20 3v4"/><path d="M22 5h-4"/><path d="M4 17v2"/><path d="M5 18H3"/></svg>
                    Generate Overlay
                </button>

                <div class="flex-1 w-full">
                    <label for="opacity" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Background image opacity</label>
                    <input type="range" id="opacity" min="0" max="1" step="0.01" value="0.8"
                           class="w-full h-2 rounded-full appearance-none bg-gray-200 dark:bg-gray-700 cursor-pointer transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                </div>

                <button id="reset"
                        class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-red-500 shadow-2xs hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-800 dark:border-neutral-700 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eraser-icon lucide-eraser shrink size-4"><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/><path d="M22 21H7"/><path d="m5 11 9 9"/></svg>
                    Reset
                </button>
            </div>
        </div>

    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
<script type="module" asp-append-version="true" src="~/js/map-warping/main.js"></script>